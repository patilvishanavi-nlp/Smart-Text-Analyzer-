<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Text Analyzer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body { background-color: #f8f9fa; padding-top: 50px; }
        .container { max-width: 800px; }
        .result-card { display: none; margin-top: 20px; }
        .badge-Positive { background-color: #28a745; }
        .badge-Negative { background-color: #dc3545; }
        .badge-Neutral { background-color: #6c757d; }
    </style>
</head>

<body>

<div class="container">
    <h1 class="text-center mb-4">Smart Text Analyzer</h1>

    <div class="card shadow-sm">
        <div class="card-body">
            <textarea id="textInput" class="form-control mb-3" rows="5"
                placeholder="Enter text to analyze..."></textarea>

            <button id="analyzeBtn" class="btn btn-primary w-100">
                Analyze Sentiment
            </button>
        </div>
    </div>

    <div id="resultCard" class="card shadow-sm result-card">
        <div class="card-body">
            <h4>Analysis Results</h4>
            <p><b>Label:</b> <span id="resLabel" class="badge"></span></p>
            <p><b>Sentiment:</b> <span id="resSentiment"></span></p>
            <p><b>Subjectivity:</b> <span id="resSubjectivity"></span></p>

            <p><b>Keywords:</b></p>
            <div id="resKeywords"></div>
        </div>
    </div>
</div>

<script>
document.getElementById("analyzeBtn").addEventListener("click", async () => {

    const text = document.getElementById("textInput").value;

    if (!text) {
        alert("Please enter some text");
        return;
    }

    const response = await fetch("/analyze", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: text })
    });

    const data = await response.json();

    document.getElementById("resLabel").innerText = data.label;
    document.getElementById("resLabel").className = "badge badge-" + data.label;

    document.getElementById("resSentiment").innerText = data.sentiment;
    document.getElementById("resSubjectivity").innerText = data.subjectivity;

    const keywordsDiv = document.getElementById("resKeywords");
    keywordsDiv.innerHTML = "";

    data.keywords.forEach(word => {
        const span = document.createElement("span");
        span.className = "badge bg-info text-dark m-1";
        span.innerText = word;
        keywordsDiv.appendChild(span);
    });

    document.getElementById("resultCard").style.display = "block";
});
</script>

</body>
</html>
